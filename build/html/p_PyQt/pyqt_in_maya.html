

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PyQt在Maya中执行的模板代码 &mdash; CG TD Course 1.0.0 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="PyQt在Nuke中执行的模板代码" href="pyqt_in_nuke.html" />
    <link rel="prev" title="PyQt在Houdini中执行的模板代码" href="pyqt_in_houdini.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> CG TD Course
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface.html">前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Python.html">Python</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../parts/PyQt.html">PyQt</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pyqt_bat.html">PyQt使用bat伪装应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyqt_designer.html">PyQt Designer安装与使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyqt_in_houdini.html">PyQt在Houdini中执行的模板代码</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">PyQt在Maya中执行的模板代码</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyqt_in_nuke.html">PyQt在Nuke中执行的模板代码</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyqt_line_edit.html">PyQt重写QLineEdit支持拖拽功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyqt_qss.html">PyQt美化界面皮肤qss</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyqt_resources.html">PyQt设置图标的相对路径</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyqt_tray_icon.html">PyQt定义应用程序任务栏图标</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Houdini.html">Houdini</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Maya.html">Maya</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Nuke.html">Nuke</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Shotgun.html">Shotgun</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Deadline.html">Deadline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Devops.html">Devops</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CG TD Course</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../parts/PyQt.html">PyQt</a> &raquo;</li>
        
      <li>PyQt在Maya中执行的模板代码</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/p_PyQt/pyqt_in_maya.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pyqtmaya">
<h1>PyQt在Maya中执行的模板代码<a class="headerlink" href="#pyqtmaya" title="永久链接至标题">¶</a></h1>
<p>坐井观天：本节知识点
如何用PyQt创建用户界面？
如何删除已经存在的用户界面？
如何给button连接函数传参？</p>
<p>管中窥豹：延伸阅读</p>
<p>from PySide2 import QtWidgets as QtGui</p>
<dl class="simple">
<dt>class MyDialog(QtGui.QDialog):</dt><dd><dl class="simple">
<dt>def __init__(self, parent=None):</dt><dd><p>super(MyDialog, self).__init__(parent)
self._initUI()</p>
</dd>
<dt>def _initUI(self):</dt><dd><p>pass</p>
</dd>
</dl>
</dd>
<dt>if __name__ == “__main__”:</dt><dd><p>dialog = MyDialog()
dialog.show()</p>
</dd>
</dl>
<p>import maya.cmds as cmds
from PySide2 import QtWidgets as QtGui</p>
<p>DIALOGNAME = “My Dialog”</p>
<dl>
<dt>class MyDialog(QtGui.QDialog):</dt><dd><dl class="simple">
<dt>def __init__(self, parent=None):</dt><dd><p>super(MyDialog, self).__init__(parent)
self._initUI()</p>
</dd>
<dt>def _initUI(self):</dt><dd><p>self.setObjectName(DIALOGNAME)</p>
</dd>
</dl>
</dd>
<dt>if __name__ == “__main__”:</dt><dd><dl class="simple">
<dt>if cmds.window(DIALOGNAME, exists=True, query=True):</dt><dd><p>cmds.deleteUI(DIALOGNAME)</p>
</dd>
</dl>
<p>dialog = MyDialog()
dialog.show()</p>
</dd>
</dl>
<p>#!/usr/bin/env python
# -<em>- coding: utf-8 -</em>-</p>
<dl class="simple">
<dt>try:</dt><dd><p>from PySide import QtGui
from PySide import QtCore</p>
</dd>
<dt>except ImportError:</dt><dd><p>from PySide2 import QtWidgets as QtGui</p>
</dd>
<dt>class Example(QtGui.QDialog):</dt><dd><dl class="simple">
<dt>def __init__(self, parent=None):</dt><dd><p>super(Example, self).__init__(parent)
self.initUI()</p>
</dd>
<dt>def initUI(self):</dt><dd><p>self.setGeometry(600, 300, 500, 500)
self.setWindowTitle(“360 Playblast”)
Browse_Button = QtGui.QPushButton(“Browse”)
name_label_file = QtGui.QLabel(“Open file”)
self.name_line_edit_file = QtGui.QLineEdit()
name_label_Frame = QtGui.QLabel(“From”)
self.name_line_edit_frame = QtGui.QLineEdit()
name_label_to = QtGui.QLabel(“To”)
self.name_line_edit_to = QtGui.QLineEdit()
name_label_Format = QtGui.QLabel(“Format”)
self.ComboBox_format = QtGui.QComboBox()
self.ComboBox_format.addItems([“avi”, “image”, “qt”, “movie”])
name_label_resolution = QtGui.QLabel(“Resoultion”)
self.ComboBox_resolution = QtGui.QComboBox()
self.ComboBox_resolution.addItems([“1920*1080”, “1080*720”, “720*540”])
Browse_Button_to = QtGui.QPushButton(“Browse”)
name_label_to1 = QtGui.QLabel(“To”)
self.name_line_edit_file1 = QtGui.QLineEdit()
name_button_OK = QtGui.QPushButton(“OK”)
name_button_Canle = QtGui.QPushButton(“Canle”)
baseLayout = QtGui.QGridLayout()
baseLayout.addWidget(Browse_Button, 0, 2)
baseLayout.addWidget(name_label_file, 0, 0)
baseLayout.addWidget(self.name_line_edit_file, 0, 1)
baseLayout.addWidget(name_label_Frame, 1, 0)
baseLayout.addWidget(self.name_line_edit_frame, 1, 1)
baseLayout.addWidget(name_label_to, 1, 2)
baseLayout.addWidget(self.name_line_edit_to, 1, 3)
baseLayout.addWidget(name_label_Format, 2, 0)
baseLayout.addWidget(self.ComboBox_format, 2, 1)
baseLayout.addWidget(name_label_resolution, 3, 0)
baseLayout.addWidget(self.ComboBox_resolution, 3, 1)
baseLayout.addWidget(name_label_to1, 4, 0)
baseLayout.addWidget(self.name_line_edit_file1, 4, 1)
baseLayout.addWidget(Browse_Button_to, 4, 2)
baseLayout.addWidget(name_button_OK, 5, 1)
baseLayout.addWidget(name_button_Canle, 5, 3)
self.setLayout(baseLayout)</p>
</dd>
</dl>
</dd>
<dt>if __name__ == “__main__”:</dt><dd><p>ex = Example()
ex.show()</p>
</dd>
</dl>
<p>from PySide2 import QtGui
from PySide2 import QtCore
from PySide2 import QtWidgets
import maya.cmds as cmds</p>
<p>from PySide2.QtWidgets import *
# 命名污染</p>
<p>from shiboken2 import wrapInstance</p>
<p>import maya.OpenMayaUI as omui</p>
<dl class="simple">
<dt>def getMayaMainWin():</dt><dd><p>pointer = omui.MQtUtil.mainWindow()
return wrapInstance(long(pointer), QtWidgets.QWidget)</p>
</dd>
</dl>
<p>mayaWindow = getMayaMainWin()
mayaWindow.setWindowOpacity(1)</p>
<dl>
<dt>class MyWindow(QtWidgets.QDialog):</dt><dd><dl>
<dt>def __init__(self, parent=getMayaMainWin()):</dt><dd><p>super(MyWindow, self).__init__(parent)
self.initUI()</p>
</dd>
<dt>def initUI(self):</dt><dd><p>self.setWindowTitle(“My Custom Window”)
self.setMinimumSize(QSize(360, 240))
mainLayout = QtWidgets.QVBoxLayout()
titleLabel = QLabel(“Control Window”)
nameText = QLineEdit()
execButton = QPushButton(“Do It!”)
mainLayout.addWidget(titleLabel)
mainLayout.addWidget(nameText)
mainLayout.addWidget(execButton)
self.setLayout(mainLayout)</p>
<p>execButton.clicked.connect(self.createCube)</p>
</dd>
<dt>def createCube(self):</dt><dd><p>userInput = nameText.text()
if not userInput:</p>
<blockquote>
<div><p>print(“Please enter cube name!”)
return 0</p>
</div></blockquote>
<p>cubeName = cmds.polyCube?????
print(“%s has been created” % cubeName)</p>
</dd>
</dl>
</dd>
<dt>if “myWin” in globals():</dt><dd><p>print(“myWin is exists, close it first!”)
myWin.deleteLater()
del mywin</p>
</dd>
</dl>
<p>myWin = MyWindow()
myWin.show()</p>
<p>理解类继承
查看PyQt文档
字符串格式化两种方法
理解类self</p>
<p>判断语句</p>
<p>真假事件
布尔运算 and or not bool()</p>
<p>PySide与PySide2的兼容性</p>
<dl class="simple">
<dt>if int(cmds.about(v=True)) &gt;= 2017:</dt><dd><p>from PySide2 import QtCore
from PySide2 import QtGui as QtGui4
from PySide2 import QtWidgets as QtGui
from shiboken2 import wrapInstance</p>
</dd>
<dt>else:</dt><dd><p>from PySide import QtGui
from PySide import QtCore
from shiboken import wrapInstance</p>
</dd>
</dl>
<p>loadUi</p>
<p>from functools import partial</p>
<dl class="simple">
<dt>def test(a, b, c):</dt><dd><p>print(a, b, c)</p>
</dd>
</dl>
<p>f = partial(test, b=2, c=3)
f(100)
f = partial(test, 1, c=3)
f(100)</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pyqt_in_nuke.html" class="btn btn-neutral float-right" title="PyQt在Nuke中执行的模板代码" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pyqt_in_houdini.html" class="btn btn-neutral float-left" title="PyQt在Houdini中执行的模板代码" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Andy Hu

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>