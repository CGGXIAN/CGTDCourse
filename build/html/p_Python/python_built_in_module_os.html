

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python内置模块：os &mdash; CG TD Course 1.0.0 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Python内置模块：re" href="python_built_in_module_re.html" />
    <link rel="prev" title="Python内置模块：json" href="python_built_in_module_json.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> CG TD Course
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface.html">前言</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../parts/Python.html">Python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="python_anonymous_function.html">Python匿名函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_api.html">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_built_in_function.html">Python内置函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_built_in_module_copy.html">Python内置模块：copy</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_built_in_module_itertools.html">Python内置模块：itertools</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_built_in_module_json.html">Python内置模块：json</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Python内置模块：os</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#import-glob">import glob</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python_built_in_module_re.html">Python内置模块：re</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_built_in_module_shutil.html">Python内置模块：shutil</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_built_in_module_subprocess.html">Python内置模块：subprocess</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_built_in_module_sys.html">Python内置模块：sys</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_closure_function.html">Python闭包函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_comprehensions.html">Python推导</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_container_dict.html">Python容器：字典 {key: value}</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_container_list.html">Python容器：列表 []</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_container_set.html">Python容器：集合 {}</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_container_tuple.html">Python容器：元组 ()</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_custom_class.html">Python自定义类</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_custom_function.html">Python自定义函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_custom_module.html">Python自定义模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_custom_package.html">Python自定义包</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_data_types_bool_none.html">Python数据类型：布尔值 &amp; 空值</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_data_types_int_float.html">Python数据类型：整型 &amp; 浮点型</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_data_types_string.html">Python数据类型：字符串</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_database_connect.html">Python数据库操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_decorator.html">Python装饰器</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_development_environment.html">Python开发环境</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_docstring.html">Python注释文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_file_operator.html">Python文件操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_flow_control.html">Python流控制语句</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_functional_programming.html">Python函数式编程</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_generator.html">Python生成器</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_ide.html">Python IDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_indentation_principle.html">Python缩进原则</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_iterator.html">Python迭代器</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_module_import_principle.html">Python模块导入机制</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_name_rules.html">Python命名规则</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_pep8.html">Python PEP8</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_recursive_function.html">Python递归函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_regular_expression.html">Python正则表达式</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_special_method_getitem_setitem.html">Python特殊方法：__getitem__ &amp; __setitem__</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_special_method_repr.html">Python特殊方法：__getitem__ &amp; __setitem__</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_special_property_dict.html">Python特殊属性：__dict__</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_special_property_doc.html">Python特殊属性：__doc__</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_special_property_file_path.html">Python特殊属性：__file__ &amp; __path__</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_special_property_name.html">Python特殊属性：__name__</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_third_party_module_yaml.html">Python第三方模块：yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_type_instance_concept.html">Python类型实例概念</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_variables_reference.html">Python变量引用</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../parts/PyQt.html">PyQt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Houdini.html">Houdini</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Maya.html">Maya</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Nuke.html">Nuke</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Shotgun.html">Shotgun</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Deadline.html">Deadline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/Devops.html">Devops</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CG TD Course</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../parts/Python.html">Python</a> &raquo;</li>
        
      <li>Python内置模块：os</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/p_Python/python_built_in_module_os.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-os">
<h1>Python内置模块：os<a class="headerlink" href="#python-os" title="永久链接至标题">¶</a></h1>
<p>os.listdir
os.walk
os.path</p>
<p>坐井观天:本节知识点
模块大概分类
常用的内置模块
import os
import sys
import glob
import json
import yaml
import shutil
import re 正则表达式
import time
import datetime
import platform
import random
import subprocess
import xml.etree.ElementTree as ET
import smtplib
from email.header import Header
from email.mime.text import MIMEText
from email.utils import parseaddr, formataddr</p>
<p>管中窥豹:延伸阅读</p>
<p>内置模块
DCC软件自带模块
第三方模块
自定义模块</p>
<p>Python模块搜索路径
当前工作路径 + sys.path</p>
<p>os
os.path
os.listdir
os.walk
os.environ</p>
<p>os.path module</p>
<p>import os</p>
<p>path = “C:/Users/huweiguo/Documents/maya/2018/maya.env”
os.path.basename(path)
os.path.dirname(path)
os.path.join(“tmp”, “data”, os.path.basename(path))
path = “~/maya/2018/maya.env”
os.path.expanduser(path)
os.path.splitext(path)</p>
<p>尽可能使用os.path来操作文件路径的问题，最好不要使用字符串来构造自己的代码，主要是为了代码的可移植性，它可以很好的处理linux mac以及windows文件路径的差异</p>
<p>#!/usr/bin/env python3.7
import os</p>
<dl class="simple">
<dt>def findFile(start, name):</dt><dd><dl class="simple">
<dt>for relpath, dirs, files in os.walk(start):</dt><dd><dl class="simple">
<dt>if name in files:</dt><dd><p>fullPath = os.path.join(start, relpath, name)
print(os.path.normpath(os.path.abspath(fullPath)))</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>if __name__ == “__main__”:</dt><dd><p>findFile(sys.argv[1], sys.argv[2])</p>
</dd>
</dl>
<p>从文件夹中查找文件</p>
<dl class="simple">
<dt>with open(“somefile”, “wt”) as f:</dt><dd><p>f.write(“Hellon”)</p>
</dd>
<dt>with open(“somefile”, “xt”) as f:</dt><dd><p>f.write(“Hellon”)</p>
</dd>
</dl>
<p>import os
if not os.path.exists(“somefile”):</p>
<blockquote>
<div><dl class="simple">
<dt>with open(“somefile”, “wt”) as f:</dt><dd><p>f.write(“Hellon”)</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>else:</dt><dd><p>print(“File already exist!”)</p>
</dd>
</dl>
<p>import os
houVersion = “17.0”
version = 2</p>
<p>###### Do not do this !!!!! ######
# filepath = “C:UsershuweiguoDocumentshoudini” + houVersion + “tmp” + “example_v0” + str(version) + “.py”
# filepath = os.path.join(“C:UsershuweiguoDocumentshoudini”, houVersion, “tmp”, “example”, str(version), “.py”)
##################################
# print(filepath)
#
# filepath = os.path.expanduser(“~/Documents/houdini{0}/tmp/example_v{1:02}.py”.format(houVersion, version))
# filepath = os.path.normpath(filepath)
# print(filepath)
# print(“This is a file ? :”, os.path.isfile(filepath))
# print(“This is a directory ? :”, os.path.isdir(r”c:temp”))
#
#
# tempFolder = ‘temp_2’
# cacheType = ‘bgeo’
# cacheName = ‘waterSplash.bgeo.gz’
# filepath = os.path.join(r”C:nrojects/bla”, tempFolder, cacheType, cacheName)
# print(filepath)
# print(os.path.normpath(filepath))</p>
<p># print(os.path.split(filepath))</p>
<p># print(os.path.dirname(filepath))</p>
<p># print(os.path.basename(filepath))</p>
<p>#### PATH SEPARATOR #####
HOUDINI_OTLSCAN_PATH = os.pathsep.join([os.path.expanduser(‘~/houdini12.1/otls’),</p>
<blockquote>
<div><p>‘/houdini_install/houdini/otls’,
‘/mnt/repo/houdini/otls’,
‘/mnt/projects/xyzproject/otls’])</p>
</div></blockquote>
<p>print HOUDINI_OTLSCAN_PATH</p>
<p># t = “D:/Program”
# l = []
# print(os.listdir(t))</p>
<p># for f in os.listdir(t):
#     l.append(os.path.normpath(os.path.join(t, f)))</p>
<p># print l</p>
<p>sys</p>
<p>shutil</p>
<p>时间模块time&amp;datetime</p>
<p>json
(JavaScript Object Notation)
import json
dir(json)</p>
<p>json.dump 字典转文件
json.dumps 字典转字符串
json.load 文件转字典
json.loads 字符串转字典</p>
<p>import json</p>
<dl class="simple">
<dt>data = {</dt><dd><p>“name”: “Andy”,
“age”: 29,
“weight”: 55.5</p>
</dd>
</dl>
<p>}</p>
<p>jsonStr = json.dumps(data)</p>
<p>jsonData = json.loads(jsonStr)</p>
<p># Writing JSON data
with open(“data.json”, “w”) as f:</p>
<blockquote>
<div><p>json.dump(data, f)</p>
</div></blockquote>
<p># indent用法
with open(“data.json”, “w”) as f:</p>
<blockquote>
<div><p>json.dump(data, f, indent=4)</p>
</div></blockquote>
<dl class="simple">
<dt>with open(“data.json”, “r”) as f:</dt><dd><p>data = json.load(f)</p>
</dd>
</dl>
<p>True &gt; true
False &gt; false
None &gt; null</p>
<p>字符串方法
decode
encode</p>
<p>python中默认编码是unicode
s1.decode(“gb2312”) 将gb2312编码的字符串转换成unicode
s2.encode(“gb2312”) 将unicode编码的字符串转换成gp2312</p>
<p>from urllib.request import urlopen
# 正常网页是utf-8，所以要转unicode
import json
u = urlopen(网址)
resp = json.loads(u.read().decode(“utf-8”))
from pprint import pprint
pprint(resp)</p>
<p><a class="reference external" href="https://python3-cookbook.readthedocs.io/zh_CN/latest/index.html">https://python3-cookbook.readthedocs.io/zh_CN/latest/index.html</a></p>
<p>pprint
from pprint import pprint
import sys
pprint(sys.path)</p>
<p>logging
import logging</p>
<dl>
<dt>def main():</dt><dd><dl class="simple">
<dt>logging.basicConfig(</dt><dd><p>filename=”app.log”,
level=logging.ERROR</p>
</dd>
</dl>
<p>)
hostname = “www.python.org”
item = “spam”
filename = “data.csv”
mode = “r”</p>
<p>logging.critical(“Host %s unknown”, hostname)
logging.error(“Couldn’t find %r”, item)
logging.warning(“Feature is deprecated”)
logging.info(“Opening file %r, mode=%r”, filename, mode)
logging.debug(“Got here”)</p>
</dd>
<dt>if __name__ == “__main__”:</dt><dd><p>main()</p>
</dd>
</dl>
<p>level是一个过滤器，critical error warning info debug代表不同的严重级别
logging.basicConfig(</p>
<blockquote>
<div><p>filename=”app.log”,
level=logging.WARNING,
format=”%(levelname)s:%(asctime)s:%(message)s”</p>
</div></blockquote>
<p>)</p>
<p><a class="reference external" href="https://docs.python.org/3/howto/logging-cookbook.html">https://docs.python.org/3/howto/logging-cookbook.html</a></p>
<p>import os
import sys
import shutil
import random
import datetime
import module as xxx
from module import xxx as xx
os.listdir()
os.getcwd()
os.mkdir()
os.makedirs()
r”&quot;自然字符串
os.remove()
os.rmdir()
os.path模块功能操作文件夹
os.path.isdir()
os.path.isfile()
os.path.split()
os.path.splitext()
os.path.splitdrive()
os.path.join()
os.path.normpath()</p>
<p>sys.path</p>
<p>shutil
shutil.copy()
shutil.copy2()
shutil.rmtree()
re 正则表达式模块</p>
<div class="section" id="import-glob">
<h2>import glob<a class="headerlink" href="#import-glob" title="永久链接至标题">¶</a></h2>
<p>正则表达式模块re</p>
<p>import re
from pprint import pprint</p>
<dl class="simple">
<dt>files = [“tank_1_color_v0.rat”,</dt><dd><p>“tank_2_color_v5.rat”,
“tank_1_color_v3.rat”,
“tank_3_color_v1.rat”,
“tank_4_color_v2.rat”,
“tank_4_color_v4.rat”,
“tank_5_color_v1.rat”,
“tank_6_color_v6.rat”]</p>
</dd>
</dl>
<p>pat_num = re.compile(“D+_(d+)_”)
pat_ver = re.compile(“(d+)D+$”)</p>
<dl class="simple">
<dt>def sorter_num(elem):</dt><dd><p>res = re.search(pat_num, elem)
return res.groups()[0]</p>
</dd>
<dt>def sorter_ver(elem):</dt><dd><p>res = re.search(pat_ver, elem)
return res.groups()[0]</p>
</dd>
</dl>
<p># pprint(sorted(files, key=sorter_num))
pprint(sorted(files, key=sorter_ver))</p>
<p>日历模块calendar</p>
<p>import calendar</p>
<dl class="simple">
<dt>for i in range(1, 13):</dt><dd><p>print(calendar.month_name[i])</p>
</dd>
</dl>
<p>import calendar</p>
<p>d={}
for i in range(1, 13):</p>
<blockquote>
<div><p>d[calendar.month_name[i]] = i</p>
</div></blockquote>
<p>print(d)</p>
<p>import calendar
from pprint import pprint
s2 = “February January  May October August September April  November July March December”</p>
<p>d = {}
for i in range(1, 13):</p>
<blockquote>
<div><p>d[calendar.month_name[i]] = i</p>
</div></blockquote>
<dl class="simple">
<dt>def sorter(elem):</dt><dd><p>return d[elem]</p>
</dd>
</dl>
<p>pprint(sorted(s2.split(), key=sorter))</p>
<p>import calendar
month_names = [calendar.month_name[i] for i in range(1, 13)]
print(month_names)
print(sorted(s2.split(), key=month_names.index))</p>
<p>邮件模块</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="python_built_in_module_re.html" class="btn btn-neutral float-right" title="Python内置模块：re" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="python_built_in_module_json.html" class="btn btn-neutral float-left" title="Python内置模块：json" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Andy Hu

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>